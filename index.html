<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PNJ BR RPG - Offline</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #1a1a1a; color: white; }
        .card-rpg { background: #2d2d2d; border-radius: 10px; padding: 20px; margin: 15px 0; }
        .dice-result { background: #4a4a4a; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .lombra-bar { height: 20px; background: #333; border-radius: 10px; overflow: hidden; }
        .lombra-fill { height: 100%; background: #6a1b9a; transition: width 0.3s; }
    </style>
</head>
<body class="container-fluid">
    <!-- Cabe√ßalho -->
    <h1 class="text-center my-4">‚öîÔ∏è PNJ BR RPG</h1>

    <!-- Cria√ß√£o de Personagem -->
    <div class="card-rpg">
        <h2>Criar Personagem</h2>
        <input type="text" id="nome" class="form-control mb-2" placeholder="Nome do Personagem">
        
        <!-- Atributos -->
        <div class="row mb-3">
            <div class="col"><input type="number" id="forca" class="form-control" placeholder="For√ßa" min="1" max="20" value="10"></div>
            <div class="col"><input type="number" id="destreza" class="form-control" placeholder="Destreza" min="1" max="20" value="10"></div>
            <div class="col"><input type="number" id="inteligencia" class="form-control" placeholder="Intelig√™ncia" min="1" max="20" value="10"></div>
            <div class="col"><input type="number" id="carisma" class="form-control" placeholder="Carisma" min="1" max="20" value="10"></div>
            <div class="col"><input type="number" id="couro" class="form-control" placeholder="Couro" min="1" max="20" value="10"></div>
        </div>

        <!-- Sistema Lombra -->
        <div class="mb-3">
            <h4>Lombra: <span id="lombraAtual">100</span>/100</h4>
            <input type="range" id="lombraInput" class="form-range" min="0" max="99" value="0">
            <button onclick="usarLombra()" class="btn btn-purple mb-2">Usar Lombra</button>
            <div class="lombra-bar"><div class="lombra-fill" id="lombraBarra"></div></div>
        </div>

        <button onclick="salvarPersonagem()" class="btn btn-success">Salvar Personagem</button>
    </div>

    <!-- Armamentos -->
    <div class="card-rpg">
        <h3>Armas</h3>
        <div class="row" id="armas"></div>
    </div>

    <!-- Hist√≥rico de Rolagens -->
    <div class="card-rpg">
        <h3>√öltimas Rolagens</h3>
        <div id="rolagens"></div>
    </div>

<script>
// Dados do Sistema
const armas = [
    { nome: "PORRETE DE A√áO FUNDIDO", dano: "4d8", atributo: "forca", critico: 18 },
    { nome: "ARCO E FLECHA", dano: "4d9", atributo: "destreza", critico: 17 }
];

// Sistema de Salvamento
let personagem = JSON.parse(localStorage.getItem('pnjbr-personagem')) || {};

function salvarPersonagem() {
    personagem = {
        nome: document.getElementById('nome').value,
        atributos: {
            forca: parseInt(document.getElementById('forca').value),
            destreza: parseInt(document.getElementById('destreza').value),
            inteligencia: parseInt(document.getElementById('inteligencia').value),
            carisma: parseInt(document.getElementById('carisma').value),
            couro: parseInt(document.getElementById('couro').value)
        },
        lombra: 100
    };
    
    localStorage.setItem('pnjbr-personagem', JSON.stringify(personagem));
    atualizarInterface();
    alert("Personagem salvo localmente!");
}

// Sistema Lombra
function usarLombra() {
    const percentual = parseInt(document.getElementById('lombraInput').value);
    const bonus = percentual.toString().split('').reduce((a, b) => a + parseInt(b), 0);
    
    if(personagem.lombra >= percentual) {
        personagem.lombra -= percentual;
        localStorage.setItem('pnjbr-personagem', JSON.stringify(personagem));
        mostrarRolagem(`üé≤ B√¥nus de Lombra: +${bonus}`);
        atualizarInterface();
    } else {
        alert("Lombra insuficiente!");
    }
}

// Sistema de Combate
function atacar(arma) {
    const [dados, faces] = arma.dano.split('d');
    let total = 0;
    
    for(let i = 0; i < dados; i++) {
        total += Math.floor(Math.random() * faces) + 1;
    }
    
    total += personagem.atributos[arma.atributo];
    mostrarRolagem(`‚öîÔ∏è ${arma.nome}: ${total} de dano`);
}

// Interface
function atualizarInterface() {
    if(personagem.nome) {
        document.getElementById('nome').value = personagem.nome;
        document.getElementById('forca').value = personagem.atributos.forca;
        document.getElementById('lombraAtual').textContent = personagem.lombra;
        document.getElementById('lombraBarra').style.width = `${personagem.lombra}%`;
    }
}

function mostrarRolagem(mensagem) {
    const div = document.getElementById('rolagens');
    div.innerHTML = `<div class="dice-result">${mensagem}</div>` + div.innerHTML;
}

// Inicializa√ß√£o
function init() {
    // Carregar armas
    const divArmas = document.getElementById('armas');
    armas.forEach(arma => {
        divArmas.innerHTML += `
            <div class="col-md-6 mb-3">
                <div class="card bg-dark">
                    <div class="card-body">
                        <h5>${arma.nome}</h5>
                        <button onclick="atacar(${JSON.stringify(arma)})" 
                                class="btn btn-danger">
                            Atacar (${arma.dano}+${arma.atributo})
                        </button>
                    </div>
                </div>
            </div>
        `;
    });

    // Carregar dados salvos
    if(Object.keys(personagem).length > 0) {
        atualizarInterface();
    }
}

init();
</script>
</body>
</html>